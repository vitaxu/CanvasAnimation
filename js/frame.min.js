(function(c){var b=function(){this.args=arguments;this.canvas=document.getElementById(this.args[0]);this.context=this.canvas.getContext("2d");this.cW=this.canvas.width;this.cH=this.canvas.height;this.time=this.canvas.getAttribute("data-time")||50;this.loop=this.canvas.getAttribute("data-loop")||"false";this.chLoop=this.loop=="true"?"\u5faa\u73af":"\u0031\u6b21";this.image=this.canvas.getElementsByTagName("img")[0];this.iW=this.image.getAttribute("width");this.iH=this.image.getAttribute("height");this.curFrame=0;this.direction=this.cW*2==this.iW?"vertical":"horizontal";this.totalFrame=this.direction=="vertical"?this.iH/this.cH/2:this.iW/this.cW/2;this.flag=true;this.timeDiff=0;this.startTime=Date.now();this.init();console.log("\u52a8\u753b\u4fe1\u606f --> \u603b\u5e27\u6570: "+this.totalFrame+", \u8fd0\u52a8\u6b21\u6570: "+this.chLoop+", \u95f4\u9694\u65f6\u95f4: "+this.time+"s")};b.prototype={init:function(){var d=this;this.loadPic(function(){d.renderFrame();d.retinaCanvas()})},loadPic:function(f){var e=this,d=new Image();d.src=e.image.getAttribute("src");d.onload=function(){if(f&&typeof f==="function"){return f()}}},drawFrame:function(){var g=this,e=this.direction=="horizontal"?g.curFrame*g.iW/g.totalFrame:0,d=this.direction=="horizontal"?0:g.curFrame*g.iH/g.totalFrame,f=this.direction=="horizontal"?g.iW/g.totalFrame:g.iW,h=this.direction=="horizontal"?g.iH:g.iH/g.totalFrame;g.context.clearRect(0,0,g.cW,g.cH);g.context.drawImage(g.image,e,d,f,h,0,0,g.cW,g.cH)},renderFrame:function(){var e=this,d=Date.now();e.timeDiff=d-e.startTime;if(e.timeDiff>e.time){e.startTime=d-(e.timeDiff%e.time);e.curFrame++;e.drawFrame()}c.requestAniFrame(function(){if(e.loop=="true"){e.curFrame==(e.totalFrame-1)&&(e.curFrame=0)}else{if(e.loop=="false"){if(e.curFrame==(e.totalFrame-1)){e.flag=false;setTimeout(e.onComplete(e.args[1]),500)}}}if(e.flag){e.renderFrame()}})},onComplete:function(d){if(d&&typeof d==="function"){return d()}},retinaCanvas:function(){var d=c.devicePixelRatio||1,f=this.context.webkitBackingStorePixelRatio||this.context.backingStorePixelRatio||1,e=d/f;if(e!==1){this.canvas.width=this.cW*e;this.canvas.height=this.cH*e;this.canvas.style.width=this.cW/100+"rem";this.canvas.style.height=this.cH/100+"rem";this.context.scale(e,e)}}};c.requestAniFrame=(function(){return c.requestAnimationFrame||c.webkitRequestAnimationFrame||function(d){c.setTimeout(d,1000/60)}})();var a=c.Frame=function(e,d){return new b(e,d)}})(window);